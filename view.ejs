<form action="#" class="box">
  <header>
    <h2><%= name %></h2>

    <% if (!services.length) { %>
    <button type="button" name="add">
      Add <%= name.toLowerCase() %>
    </button>
    <% } else { %>
    <select name="services" placeholder="Add <%= name.toLowerCase() %>">
      <option value="">Add <%= name.toLowerCase() %></option>
      <% services.forEach(function each(service) { %>
      <option value="<%= service.type || service.name %>"><%= service.name %></option>
      <% }); %>
    </select>
    <% } %>

    <div style="clear:both">
      <!-- 
      Horrible hack, but needed for clearing floats without overflow as it will
      kill the autocomplete
      -->
    </div>
  </header>

  <% if ('description' in locals && description) { %>
  <p><%- description %></p>
  <% } %>

  <fieldset class="target" data-pagelet="target"></fieldset>

  <% active.forEach(function each(service) { console.log(service); %>
  <fieldset class="added">
    <strong>
      <%= service.name %>

      <% if (service.type) { %>
      <small><%= service.type %></small>
      <% } %>
    </strong>

    <ul>
      <li>
        <button type="submit" name="delete" value="<%= service.name %>">
          Remove
        </button>
      </li>
    </ul>
  </fieldset>
  <% }) %>
</form>
